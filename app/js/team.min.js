/*! elabftw 1.7.0 https://www.elabftw.net */

function schedulerCreate(start,end){var title=prompt("Comment:");title&&$.post("app/controllers/SchedulerController.php",{create:!0,start:start,end:end,title:title,item:$("#infos").data("item")}).done(function(data){data.res?(notif(data.msg,"ok"),window.location.replace("team.php?tab=1&item="+$("#infos").data("item"))):notif(data.msg,"ko")})}$(document).ready(function(){$("#scheduler").fullCalendar({header:{left:"prev,next today",center:"title",right:"agendaWeek"},defaultView:"agendaWeek",selectable:!0,selectHelper:!0,editable:!0,lang:$("#infos").data("lang"),eventLimit:!0,eventSources:[{url:"app/controllers/SchedulerController.php",type:"POST",data:{read:!0,item:$("#infos").data("item")},error:function(){alert("there was an error while fetching events!")}}],firstDay:1,allDaySlot:!1,minTime:"06:00:00",eventBackgroundColor:"rgb(41,174,185)",dayClick:function(start){schedulerCreate(start.format(),end.format())},select:function(start,end){schedulerCreate(start.format(),end.format())},eventClick:function(calEvent){confirm("Delete this event?")&&$.post("app/controllers/SchedulerController.php",{destroy:!0,id:calEvent.id}).done(function(data){data.res?($("#scheduler").fullCalendar("removeEvents",calEvent.id),notif(data.msg,"ok")):notif(data.msg,"ko")})},eventDrop:function(calEvent){$.post("app/controllers/SchedulerController.php",{updateStart:!0,start:calEvent.start.format(),end:calEvent.end.format(),id:calEvent.id}).done(function(){notif("Saved","ok")})},eventResize:function(calEvent){$.post("app/controllers/SchedulerController.php",{updateEnd:!0,end:calEvent.end.format(),id:calEvent.id}).done(function(){notif("Saved","ok")})}})});