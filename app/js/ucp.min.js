/*! elabftw 1.7.0 https://www.elabftw.net */

$(document).ready(function(){var Templates={controller:"app/controllers/UcpController.php",saveToFile:function(id,name){var content=tinyMCE.get(id).getContent(),blob=new Blob([content],{type:"text/plain;charset=utf-8"});saveAs(blob,name+".elabftw.tpl")},destroy:function(id){confirm("Delete this ?")&&$.post(this.controller,{templatesDestroy:!0,id:id}).done(function(data){var json=JSON.parse(data);json.res?(notif(json.msg,"ok"),window.location.replace("ucp.php?tab=3")):notif(json.msg,"ko")})}};$(document).on("click",".save-to-file",function(){Templates.saveToFile($(this).data("id"),$(this).data("name"))}),$(document).on("click",".destroy-template",function(){Templates.destroy($(this).data("id"))}),$("#import_tpl").hide(),$(document).on("click","#import-from-file",function(){$("#import_tpl").toggle()}),$("#import_tpl").on("change",function(e){var title=document.getElementById("import_tpl").value.replace(".elabftw.tpl","").replace("C:\\fakepath\\","");readFile(this.files[0],function(e){tinyMCE.get("new_tpl_txt").setContent(e.target.result),$("#new_tpl_name").val(title),$("#import_tpl").hide()})}),$(".nav-pills").sortable({axis:"x",helper:"clone",cancel:"#subtab_1",update:function(event,ui){var ordering=$(".nav-pills").sortable("toArray");$.post("app/controllers/AdminController.php",{updateOrdering:!0,table:"experiments_templates",ordering:ordering}).done(function(data){var json=JSON.parse(data);json.res?notif(json.msg,"ok"):notif(json.msg,"ko")})}});$(".subdivhandle").hide(),$("#subtab_1div").show(),$("#subtab_1").addClass("selected"),$(".subtabhandle").click(function(event){var tabhandle="#"+event.target.id,divhandle="#"+event.target.id+"div";$(".subdivhandle").hide(),$(divhandle).show(),$(".subtabhandle").removeClass("badgetabactive"),$(tabhandle).addClass("badgetabactive")}),tinymce.init({mode:"specific_textareas",editor_selector:"mceditable",content_css:"app/css/tinymce.css",plugins:"table textcolor searchreplace code lists advlist fullscreen insertdatetime paste charmap save image link",toolbar1:"undo redo | bold italic underline | fontsizeselect | alignleft aligncenter alignright alignjustify | superscript subscript | bullist numlist outdent indent | forecolor backcolor | charmap | link",removed_menuitems:"newdocument",language:$("#language").data("lang")})});